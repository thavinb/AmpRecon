# Copyright (C) 2023 Genome Surveillance Unit/Genome Research Ltd.

Bootstrap: docker
From: python:3.8-slim-bullseye

%post
    # The repo for buster release is already archived
    # sed -i 's|http://deb.debian.org/debian|https://archive.debian.org/debian|g' /etc/apt/sources.list

    # Install required packages
    apt update -qq -y
    apt upgrade -y
    apt install gcc git grep procps libcurl4-openssl-dev r-base build-essential fastqc -y

    # Install required Python packages
    pip install --upgrade pip
    pip install --upgrade git+https://github.com/MultiQC/MultiQC.git@v1.31
    pip install python-csv \
        pytest \
        pandas \
        pyvcf

%runscript
    exec /bin/bash/ "$@"
