Stage 1 BCL to VCF

------------------------------------------------------------------------
************************************************************************

Step 1 - BCL to CRAM
https://aspisstaticweb.cog.sanger.ac.uk/edit.html?cfg_name=step1-28877

------------------------------------------------------------------------
1 - illumina2bam

"/software/sciops/pkg/bambi/0.11.1/bin/bambi"
1	"i2b"
2	"--intensity-dir=/nfs/sf55/IL_seq_data/analysis/181009_MS3_27122_A_MS7201990-300V2/Data/Intensities"
3	"--basecalls-dir=/nfs/sf55/IL_seq_data/analysis/181009_MS3_27122_A_MS7201990-300V2/Data/Intensities/BaseCalls"
4	"--lane=1"
5	"--platform-unit=181009_MS3_27122_A_MS7201990-300V2_1"
6	"--read-group-id=27122_1"
7	"--study-name=\"ERP000190: Spotmalaria is a new project that will provide field researchers with a simple set of tools to conduct surveys of molecular markers of drug resistance as well as a wide range of other parasite genetic markers.  It is based on technologies developed at the Sanger Institute to sequence the parasite genome from dried blood spots.   This data is part of a pre-publication release. For information on the proper use of pre-publication data shared by the Wellcome Trust Sanger Institute (including details of any publication moratoria), please see http://www.sanger.ac.uk/datasharing/\""
8	"--sample-alias=ERS2488229,ERS2488230,ERS2488231,ERS2488232,ERS2488233,ERS2488234,ERS2488235,ERS2488236,ERS2488237,ERS2488238,ERS2488239,ERS2488240,ERS2488241,ERS2488242,ERS2488243,ERS2488244,ERS2488245,ERS2488246,ERS2488247,ERS2488248,ERS2488249,ERS2488250,ERS2488251,ERS2488252,ERS2488253,ERS2488254,ERS2488255,ERS2488256,ERS2488257,ERS2488258,ERS2488259,ERS2488260,ERS2488261,ERS2488262,ERS2488263,ERS2488264,ERS2488265,ERS2488266,ERS2488267,ERS2488268,ERS2488269,ERS2488270,ERS2488271,ERS2488272,ERS2488273,ERS2488274,ERS2488275,ERS2488276,ERS2488277,ERS2488278,ERS2488279,ERS2488280,ERS2488281,ERS2488282,ERS2488283,ERS2488284,ERS2488285,ERS2488286,ERS2488287,ERS2488288,ERS2488289,ERS2488290,ERS2488291,ERS2488292,ERS2488293,ERS2488294,ERS2488295,ERS2488296,ERS2488297,ERS2488298,ERS2488299,ERS2488300,ERS2488301,ERS2488302,ERS2488303,ERS2488304,ERS2488305,ERS2488306,ERS2488307,ERS2488308,ERS2488309,ERS2488310,ERS2488311,ERS2488312,ERS2488313,ERS2488314,ERS2488315,ERS2488316,ERS2488317,ERS2488318,ERS2488319,ERS2488320,ERS2488321,ERS2488322,ERS2488323,ERS2488324,ERS2488325,ERS2488326,ERS2488327,ERS2488328,ERS2488329,ERS2488330,ERS2488331,ERS2488332,ERS2488333,ERS2488334,ERS2488335,ERS2488336,ERS2488337,ERS2488338,ERS2488339,ERS2488340,ERS2488341,ERS2488342,ERS2488343,ERS2488344,ERS2488345,ERS2488346,ERS2488347,ERS2488348,ERS2488349,ERS2488350,ERS2488351,ERS2488352,ERS2488353,ERS2488354,ERS2488355,ERS2488356,ERS2488357,ERS2488358,ERS2488359,ERS2488376,ERS2488377,ERS2488378,ERS2488379,ERS2488380,ERS2488381,ERS2488382,ERS2488383,ERS2488384,ERS2488385,ERS2488386,ERS2488387,ERS2488388,ERS2488389,ERS2488390,ERS2488391,ERS2488392,ERS2488360,ERS2488361,ERS2488362,ERS2488363,ERS2488364,ERS2488365,ERS2488366,ERS2488367,ERS2488368,ERS2488369,ERS2488370,ERS2488371,ERS2488372,ERS2488373,ERS2488374,ERS2488375,ERS2488393,ERS2488394,ERS2488395,ERS2488396,ERS2488397,ERS2488398,ERS2488399,ERS2488400,ERS2488401,ERS2488402,ERS2488403,ERS2488404,ERS2488405,ERS2488406,ERS2488407,ERS2488408,ERS2488409,ERS2488410,ERS2488411,ERS2488412,ERS2488413,ERS2488414,ERS2488415,ERS2488416,ERS2488417,ERS2488418,ERS2488419,ERS2488420,ERS2488421,ERS2488422,ERS2488423,ERS2488424,ERS2488425,ERS2488426,ERS2488427,ERS2488428,ERS2488429,ERS2488430,ERS2488431,ERS2488432,ERS2488433,ERS2488434,ERS2488435,ERS2488436,ERS2488437,ERS2488438,ERS2488439,ERS2488440,ERS2488441,ERS2488442,ERS2488443,ERS2488444,ERS2488445,ERS2488446,ERS2488447,ERS2488448,ERS2488449,ERS2488450,ERS2488451,ERS2488452,ERS2488453,ERS2488454,ERS2488455,ERS2488456,ERS2488457,ERS2488458,ERS2488459,ERS2488460,ERS2488461,ERS2488462,ERS2488463,ERS2488464,ERS2488465,ERS2488466,ERS2488467,ERS2488468,ERS2488469,ERS2488470,ERS2488471,ERS2488472,ERS2488473,ERS2488474,ERS2488475,ERS2488476,ERS2488477,ERS2488478,ERS2488479,ERS2488480,ERS2488481,ERS2488482,ERS2488483,ERS2488484,ERS2488485,ERS2488486,ERS2488487,ERS2488488,ERS2488489,ERS2488490,ERS2488491,ERS2488492,ERS2488493,ERS2488494,ERS2488495,ERS2488496,ERS2488497,ERS2488498,ERS2488499,ERS2488500,ERS2488501,ERS2488502,ERS2488503,ERS2488504,ERS2488505,ERS2488506,ERS2488507,ERS2488508,ERS2488509,ERS2488510,ERS2488511,ERS2488512,ERS2488513,ERS2488514,ERS2488515,ERS2488516,ERS2488517,ERS2488518,ERS2488519,ERS2488520,ERS2488521,ERS2488522,ERS2488523,ERS2488524,ERS2488525,ERS2488526,ERS2488527,ERS2488528,ERS2488529,ERS2488530,ERS2488531,ERS2488532,ERS2488533,ERS2488534,ERS2488535,ERS2488536,ERS2488537,ERS2488538,ERS2488539,ERS2488540,ERS2488541,ERS2488542,ERS2488543,ERS2488544,ERS2488545,ERS2488546,ERS2488547,ERS2488548,ERS2488549,ERS2488550,ERS2488551,ERS2488552,ERS2488553,ERS2488554,ERS2488555,ERS2488556,ERS2488557,ERS2488558,ERS2488559,ERS2488560,ERS2488561,ERS2488562,ERS2488563,ERS2488564,ERS2488565,ERS2488566,ERS2488567,ERS2488568,ERS2488569,ERS2488570,ERS2488571,ERS2488572,ERS2488573,ERS2488574,ERS2488575,ERS2488576,ERS2488577,ERS2488578,ERS2488579,ERS2488580,ERS2488581,ERS2488582,ERS2488583,ERS2488584,ERS2488585,ERS2488586,ERS2488587,ERS2488588,ERS2488589,ERS2488590,ERS2488591,ERS2488592,ERS2488593,ERS2488594,ERS2488595,ERS2488596,ERS2488597,ERS2488598,ERS2488599,ERS2488600,ERS2488601,ERS2488602,ERS2488603,ERS2488604,ERS2488605,ERS2488606,ERS2488607,ERS2488608,ERS2488609,ERS2488610,ERS2488611,ERS2488612,ERS2488229,ERS2488230,ERS2488231,ERS2488232,ERS2488233,ERS2488234,ERS2488235,ERS2488236,ERS2488237,ERS2488238,ERS2488239,ERS2488240,ERS2488241,ERS2488242,ERS2488243,ERS2488244,ERS2488245,ERS2488246,ERS2488247,ERS2488248,ERS2488249,ERS2488250,ERS2488251,ERS2488252,ERS2488253,ERS2488254,ERS2488255,ERS2488256,ERS2488257,ERS2488258,ERS2488259,ERS2488260,ERS2488261,ERS2488262,ERS2488263,ERS2488264,ERS2488265,ERS2488266,ERS2488267,ERS2488268,ERS2488269,ERS2488270,ERS2488271,ERS2488272,ERS2488273,ERS2488274,ERS2488275,ERS2488276,ERS2488277,ERS2488278,ERS2488279,ERS2488280,ERS2488281,ERS2488282,ERS2488283,ERS2488284,ERS2488285,ERS2488286,ERS2488287,ERS2488288,ERS2488289,ERS2488290,ERS2488291,ERS2488292,ERS2488293,ERS2488294,ERS2488295,ERS2488296,ERS2488297,ERS2488298,ERS2488299,ERS2488300,ERS2488301,ERS2488302,ERS2488303,ERS2488304,ERS2488305,ERS2488306,ERS2488307,ERS2488308,ERS2488309,ERS2488310,ERS2488311,ERS2488312,ERS2488313,ERS2488314,ERS2488315,ERS2488316,ERS2488317,ERS2488318,ERS2488319,ERS2488320,ERS2488321,ERS2488322,ERS2488323,ERS2488324,ERS2488325,ERS2488326,ERS2488327,ERS2488328,ERS2488329,ERS2488330,ERS2488331,ERS2488332,ERS2488333,ERS2488334,ERS2488335,ERS2488336,ERS2488337,ERS2488338,ERS2488339,ERS2488340,ERS2488341,ERS2488342,ERS2488343,ERS2488344,ERS2488345,ERS2488346,ERS2488347,ERS2488348,ERS2488349,ERS2488350,ERS2488351,ERS2488352,ERS2488353,ERS2488354,ERS2488355,ERS2488356,ERS2488357,ERS2488358,ERS2488359,ERS2488376,ERS2488377,ERS2488378,ERS2488379,ERS2488380,ERS2488381,ERS2488382,ERS2488383,ERS2488384,ERS2488385,ERS2488386,ERS2488387,ERS2488388,ERS2488389,ERS2488390,ERS2488391,ERS2488392,ERS2488360,ERS2488361,ERS2488362,ERS2488363,ERS2488364,ERS2488365,ERS2488366,ERS2488367,ERS2488368,ERS2488369,ERS2488370,ERS2488371,ERS2488372,ERS2488373,ERS2488374,ERS2488375,ERS2488393,ERS2488394,ERS2488395,ERS2488396,ERS2488397,ERS2488398,ERS2488399,ERS2488400,ERS2488401,ERS2488402,ERS2488403,ERS2488404,ERS2488405,ERS2488406,ERS2488407,ERS2488408,ERS2488409,ERS2488410,ERS2488411,ERS2488412,ERS2488413,ERS2488414,ERS2488415,ERS2488416,ERS2488417,ERS2488418,ERS2488419,ERS2488420,ERS2488421,ERS2488422,ERS2488423,ERS2488424,ERS2488425,ERS2488426,ERS2488427,ERS2488428,ERS2488429,ERS2488430,ERS2488431,ERS2488432,ERS2488433,ERS2488434,ERS2488435,ERS2488436,ERS2488437,ERS2488438,ERS2488439,ERS2488440,ERS2488441,ERS2488442,ERS2488443,ERS2488444,ERS2488445,ERS2488446,ERS2488447,ERS2488448,ERS2488449,ERS2488450,ERS2488451,ERS2488452,ERS2488453,ERS2488454,ERS2488455,ERS2488456,ERS2488457,ERS2488458,ERS2488459,ERS2488460,ERS2488461,ERS2488462,ERS2488463,ERS2488464,ERS2488465,ERS2488466,ERS2488467,ERS2488468,ERS2488469,ERS2488470,ERS2488471,ERS2488472,ERS2488473,ERS2488474,ERS2488475,ERS2488476,ERS2488477,ERS2488478,ERS2488479,ERS2488480,ERS2488481,ERS2488482,ERS2488483,ERS2488484,ERS2488485,ERS2488486,ERS2488487,ERS2488488,ERS2488489,ERS2488490,ERS2488491,ERS2488492,ERS2488493,ERS2488494,ERS2488495,ERS2488496,ERS2488497,ERS2488498,ERS2488499,ERS2488500,ERS2488501,ERS2488502,ERS2488503,ERS2488504,ERS2488505,ERS2488506,ERS2488507,ERS2488508,ERS2488509,ERS2488510,ERS2488511,ERS2488512,ERS2488513,ERS2488514,ERS2488515,ERS2488516,ERS2488517,ERS2488518,ERS2488519,ERS2488520,ERS2488521,ERS2488522,ERS2488523,ERS2488524,ERS2488525,ERS2488526,ERS2488527,ERS2488528,ERS2488529,ERS2488530,ERS2488531,ERS2488532,ERS2488533,ERS2488534,ERS2488535,ERS2488536,ERS2488537,ERS2488538,ERS2488539,ERS2488540,ERS2488541,ERS2488542,ERS2488543,ERS2488544,ERS2488545,ERS2488546,ERS2488547,ERS2488548,ERS2488549,ERS2488550,ERS2488551,ERS2488552,ERS2488553,ERS2488554,ERS2488555,ERS2488556,ERS2488557,ERS2488558,ERS2488559,ERS2488560,ERS2488561,ERS2488562,ERS2488563,ERS2488564,ERS2488565,ERS2488566,ERS2488567,ERS2488568,ERS2488569,ERS2488570,ERS2488571,ERS2488572,ERS2488573,ERS2488574,ERS2488575,ERS2488576,ERS2488577,ERS2488578,ERS2488579,ERS2488580,ERS2488581,ERS2488582,ERS2488583,ERS2488584,ERS2488585,ERS2488586,ERS2488587,ERS2488588,ERS2488589,ERS2488590,ERS2488591,ERS2488592,ERS2488593,ERS2488594,ERS2488595,ERS2488596,ERS2488597,ERS2488598,ERS2488599,ERS2488600,ERS2488601,ERS2488602,ERS2488603,ERS2488604,ERS2488605,ERS2488606,ERS2488607,ERS2488608,ERS2488609,ERS2488610,ERS2488611,ERS2488612,ERS2488229,ERS2488230,ERS2488231,ERS2488232,ERS2488233,ERS2488234,ERS2488235,ERS2488236,ERS2488237,ERS2488238,ERS2488239,ERS2488240,ERS2488241,ERS2488242,ERS2488243,ERS2488244,ERS2488245,ERS2488246,ERS2488247,ERS2488248,ERS2488249,ERS2488250,ERS2488251,ERS2488252,ERS2488253,ERS2488254,ERS2488255,ERS2488256,ERS2488257,ERS2488258,ERS2488259,ERS2488260,ERS2488261,ERS2488262,ERS2488263,ERS2488264,ERS2488265,ERS2488266,ERS2488267,ERS2488268,ERS2488269,ERS2488270,ERS2488271,ERS2488272,ERS2488273,ERS2488274,ERS2488275,ERS2488276,ERS2488277,ERS2488278,ERS2488279,ERS2488280,ERS2488281,ERS2488282,ERS2488283,ERS2488284,ERS2488285,ERS2488286,ERS2488287,ERS2488288,ERS2488289,ERS2488290,ERS2488291,ERS2488292,ERS2488293,ERS2488294,ERS2488295,ERS2488296,ERS2488297,ERS2488298,ERS2488299,ERS2488300,ERS2488301,ERS2488302,ERS2488303,ERS2488304,ERS2488305,ERS2488306,ERS2488307,ERS2488308,ERS2488309,ERS2488310,ERS2488311,ERS2488312,ERS2488313,ERS2488314,ERS2488315,ERS2488316,ERS2488317,ERS2488318,ERS2488319,ERS2488320,ERS2488321,ERS2488322,ERS2488323,ERS2488324,ERS2488325,ERS2488326,ERS2488327,ERS2488328,ERS2488329,ERS2488330,ERS2488331,ERS2488332,ERS2488333,ERS2488334,ERS2488335,ERS2488336,ERS2488337,ERS2488338,ERS2488339,ERS2488340,ERS2488341,ERS2488342,ERS2488343,ERS2488344,ERS2488345,ERS2488346,ERS2488347,ERS2488348,ERS2488349,ERS2488350,ERS2488351,ERS2488352,ERS2488353,ERS2488354,ERS2488355,ERS2488356,ERS2488357,ERS2488358,ERS2488359,ERS2488376,ERS2488377,ERS2488378,ERS2488379,ERS2488380,ERS2488381,ERS2488382,ERS2488383,ERS2488384,ERS2488385,ERS2488386,ERS2488387,ERS2488388,ERS2488389,ERS2488390,ERS2488391,ERS2488392,ERS2488360,ERS2488361,ERS2488362,ERS2488363,ERS2488364,ERS2488365,ERS2488366,ERS2488367,ERS2488368,ERS2488369,ERS2488370,ERS2488371,ERS2488372,ERS2488373,ERS2488374,ERS2488375,ERS2488393,ERS2488394,ERS2488395,ERS2488396,ERS2488397,ERS2488398,ERS2488399,ERS2488400,ERS2488401,ERS2488402,ERS2488403,ERS2488404,ERS2488405,ERS2488406,ERS2488407,ERS2488408,ERS2488409,ERS2488410,ERS2488411,ERS2488412,ERS2488413,ERS2488414,ERS2488415,ERS2488416,ERS2488417,ERS2488418,ERS2488419,ERS2488420,ERS2488421,ERS2488422,ERS2488423,ERS2488424,ERS2488425,ERS2488426,ERS2488427,ERS2488428,ERS2488429,ERS2488430,ERS2488431,ERS2488432,ERS2488433,ERS2488434,ERS2488435,ERS2488436,ERS2488437,ERS2488438,ERS2488439,ERS2488440,ERS2488441,ERS2488442,ERS2488443,ERS2488444,ERS2488445,ERS2488446,ERS2488447,ERS2488448,ERS2488449,ERS2488450,ERS2488451,ERS2488452,ERS2488453,ERS2488454,ERS2488455,ERS2488456,ERS2488457,ERS2488458,ERS2488459,ERS2488460,ERS2488461,ERS2488462,ERS2488463,ERS2488464,ERS2488465,ERS2488466,ERS2488467,ERS2488468,ERS2488469,ERS2488470,ERS2488471,ERS2488472,ERS2488473,ERS2488474,ERS2488475,ERS2488476,ERS2488477,ERS2488478,ERS2488479,ERS2488480,ERS2488481,ERS2488482,ERS2488483,ERS2488484,ERS2488485,ERS2488486,ERS2488487,ERS2488488,ERS2488489,ERS2488490,ERS2488491,ERS2488492,ERS2488493,ERS2488494,ERS2488495,ERS2488496,ERS2488497,ERS2488498,ERS2488499,ERS2488500,ERS2488501,ERS2488502,ERS2488503,ERS2488504,ERS2488505,ERS2488506,ERS2488507,ERS2488508,ERS2488509,ERS2488510,ERS2488511,ERS2488512,ERS2488513,ERS2488514,ERS2488515,ERS2488516,ERS2488517,ERS2488518,ERS2488519,ERS2488520,ERS2488521,ERS2488522,ERS2488523,ERS2488524,ERS2488525,ERS2488526,ERS2488527,ERS2488528,ERS2488529,ERS2488530,ERS2488531,ERS2488532,ERS2488533,ERS2488534,ERS2488535,ERS2488536,ERS2488537,ERS2488538,ERS2488539,ERS2488540,ERS2488541,ERS2488542,ERS2488543,ERS2488544,ERS2488545,ERS2488546,ERS2488547,ERS2488548,ERS2488549,ERS2488550,ERS2488551,ERS2488552,ERS2488553,ERS2488554,ERS2488555,ERS2488556,ERS2488557,ERS2488558,ERS2488559,ERS2488560,ERS2488561,ERS2488562,ERS2488563,ERS2488564,ERS2488565,ERS2488566,ERS2488567,ERS2488568,ERS2488569,ERS2488570,ERS2488571,ERS2488572,ERS2488573,ERS2488574,ERS2488575,ERS2488576,ERS2488577,ERS2488578,ERS2488579,ERS2488580,ERS2488581,ERS2488582,ERS2488583,ERS2488584,ERS2488585,ERS2488586,ERS2488587,ERS2488588,ERS2488589,ERS2488590,ERS2488591,ERS2488592,ERS2488593,ERS2488594,ERS2488595,ERS2488596,ERS2488597,ERS2488598,ERS2488599,ERS2488600,ERS2488601,ERS2488602,ERS2488603,ERS2488604,ERS2488605,ERS2488606,ERS2488607,ERS2488608,ERS2488609,ERS2488610,ERS2488611,ERS2488612"
9	"--threads=8"
10	"--output-file=-"
11	"--compression-level=0"
use_STDIN	false
description	"Create the initial BAM file from the data generated by the Illumina machine"
comment	"Actual executable used depends on the value of the 12b_implementation parameter: java - use illumina2bam (default); bambi - use new bambi i2b"
use_STDOUT	true


	"/software/sciops/pkg/bambi/0.11.2/bin/bambi"
1	"i2b"
2	"--intensity-dir=/nfs/sf55/IL_seq_data/analysis/190327_MS7_28877_A_MS7940394-300V2/Data/Intensities"
3	"--basecalls-dir=/nfs/sf55/IL_seq_data/analysis/190327_MS7_28877_A_MS7940394-300V2/Data/Intensities/BaseCalls"
4	"--lane=1"
5	"--platform-unit=190327_MS7_28877_A_MS7940394-300V2_1"
6	"--read-group-id=28877_1"
7	"--study-name=\"ERP000190: Spot Malaria aims to bring together malaria genetics with epidemiological information across both time and space. The project has two distinct but complementary goals; to simplify genetic data reporting so that more users are able to analyse and interpret the key features of their data, focusing on what is of most importance for field research and malaria control in a timely manner; and to create an open access global observatory across time and space for genetic variation and other relevant metadata such as malaria prevalence and deployment of control measures. This data is part of a pre-publication release. For information on the proper use of pre-publication data shared by the Wellcome Trust Sanger Institute (including details of any publication moratoria), please see http://www.sanger.ac.uk/datasharing/,ERP000190: Recon Project: Genetic reconnaissance technology to support malaria elimination in the Greater Mekong Subregion (GMS) This data is part of a pre-publication release. For information on the proper use of pre-publication data shared by the Wellcome Trust Sanger Institute please see http://www.sanger.ac.uk/datasharing/\""
8	"--sample-alias=ERS3207987,ERS3207988,ERS3207989,ERS3207990,ERS3207991,ERS3207992,ERS3207993,ERS3207994,ERS3207995,ERS3207996,ERS3207997,ERS3207998,ERS3207999,ERS3208000,ERS3208001,ERS3208002,ERS3208003,ERS3208004,ERS3208005,ERS3208006,ERS3208007,ERS3208008,ERS3208009,ERS3208010,ERS3208011,ERS3208012,ERS3208013,ERS3208014,ERS3208015,ERS3208016,ERS3208017,ERS3208018,ERS3208019,ERS3208020,ERS3208021,ERS3208022,ERS3208023,ERS3208024,ERS3208025,ERS3208026,ERS3208027,ERS3208028,ERS3208029,ERS3208030,ERS3208031,ERS3208032,ERS3208033,ERS3208034,ERS3208035,ERS3208036,ERS3208037,ERS3208038,ERS3208039,ERS3208040,ERS3208041,ERS3208042,ERS3208043,ERS3208044,ERS3208045,ERS3208046,ERS3208047,ERS3208048,ERS3208049,ERS3208050,ERS3208051,ERS3208052,ERS3208053,ERS3208054,ERS3208055,ERS3208056,ERS3208057,5712STDY7848558,5712STDY7848559,ERS3223089,ERS3223090,ERS3223091,ERS3223092,ERS3223093,ERS3223094,ERS3223095,ERS3223096,ERS3223097,ERS3223098,ERS3223099,ERS3223100,ERS3223101,ERS3223102,ERS3223103,ERS3223104,ERS3223105,ERS3223106,ERS3223107,ERS3223108,ERS3223109,ERS3223110,ERS3223111,ERS3223112,ERS3223113,ERS3223114,ERS3223115,ERS3223116,ERS3223117,ERS3223118,ERS3223119,ERS3223120,ERS3223121,ERS3223122,ERS3223123,ERS3223124,ERS3223125,ERS3223126,ERS3223127,ERS3223128,ERS3223129,ERS3223130,ERS3223131,ERS3223132,ERS3223133,ERS3223134,ERS3223135,ERS3223136,ERS3223137,ERS3223138,ERS3223139,ERS3223140,ERS3223141,ERS3223142,ERS3223143,ERS3223144,ERS3223145,ERS3223146,ERS3223147,ERS3223148,ERS3223149,ERS3223150,ERS3223151,ERS3223152,ERS3223153,ERS3223154,ERS3223155,ERS3223156,ERS3223157,ERS3223158,ERS3223159,ERS3223160,ERS3223161,ERS3223162,ERS3223163,ERS3223164,ERS3223165,ERS3223166,ERS3223167,ERS3223168,ERS3223169,ERS3223170,ERS3223171,ERS3223172,ERS3223173,ERS3223174,ERS3223175,ERS3223176,ERS3223177,ERS3223178,ERS3223179,ERS3223180,ERS3223181,ERS3223182,5023STDY7880474,5023STDY7880475,ERS3222995,ERS3222996,ERS3222997,ERS3222998,ERS3222999,ERS3223000,ERS3223001,ERS3223002,ERS3223003,ERS3223004,ERS3223005,ERS3223006,ERS3223007,ERS3223008,ERS3223009,ERS3223010,ERS3223011,ERS3223012,ERS3223013,ERS3223014,ERS3223015,ERS3223016,ERS3223017,ERS3223018,ERS3223019,ERS3223020,ERS3223021,ERS3223022,ERS3223023,ERS3223024,ERS3223025,ERS3223026,ERS3223027,ERS3223028,ERS3223029,ERS3223030,ERS3223031,ERS3223032,ERS3223033,ERS3223034,ERS3223035,ERS3223036,ERS3223037,ERS3223038,ERS3223039,ERS3223040,ERS3223041,ERS3223042,ERS3223043,ERS3223044,ERS3223045,ERS3223046,ERS3223047,ERS3223048,ERS3223049,ERS3223050,ERS3223051,ERS3223052,ERS3223053,ERS3223054,ERS3223055,ERS3223056,ERS3223057,ERS3223058,ERS3223059,ERS3223060,ERS3223061,ERS3223062,ERS3223063,ERS3223064,ERS3223065,ERS3223066,ERS3223067,ERS3223068,ERS3223082,ERS3223083,ERS3223084,ERS3223085,ERS3223086,ERS3223087,ERS3223088,ERS3223069,ERS3223070,ERS3223071,ERS3223072,ERS3223073,ERS3223074,ERS3223075,ERS3223076,ERS3223077,ERS3223078,ERS3223079,ERS3223080,ERS3223081,5023STDY7880378,5023STDY7880379,ERS3223183,ERS3223184,ERS3223185,ERS3223186,ERS3223187,ERS3223188,ERS3223189,ERS3223190,ERS3223191,ERS3223192,ERS3223193,ERS3223194,ERS3223195,ERS3223196,ERS3223197,ERS3223198,ERS3223199,ERS3223200,ERS3223201,ERS3223202,ERS3223203,ERS3223204,ERS3223205,ERS3223206,ERS3223207,ERS3223208,ERS3223209,ERS3223210,ERS3223211,ERS3223212,ERS3223213,ERS3223214,ERS3223215,ERS3223216,ERS3223217,ERS3223218,ERS3223219,ERS3223220,ERS3223221,ERS3223222,ERS3223223,ERS3223224,ERS3223225,ERS3223226,ERS3223227,ERS3223228,ERS3223229,ERS3223230,ERS3223231,ERS3223232,ERS3223233,ERS3223234,ERS3223235,ERS3223236,ERS3223237,ERS3223238,ERS3223239,ERS3223240,ERS3223241,ERS3223242,ERS3223243,ERS3223244,ERS3223245,ERS3223246,ERS3223247,ERS3223248,ERS3223249,ERS3223250,ERS3223251,ERS3223252,ERS3223253,ERS3223254,ERS3223255,ERS3223256,ERS3223257,ERS3223258,ERS3223259,ERS3223260,ERS3223261,ERS3223262,ERS3223263,ERS3223264,ERS3223265,ERS3223266,ERS3223267,ERS3223268,ERS3223269,ERS3223270,ERS3223271,ERS3223272,ERS3223273,ERS3223274,ERS3223275,ERS3223276,5023STDY7880570,5023STDY7880571,ERS3207987,ERS3207988,ERS3207989,ERS3207990,ERS3207991,ERS3207992,ERS3207993,ERS3207994,ERS3207995,ERS3207996,ERS3207997,ERS3207998,ERS3207999,ERS3208000,ERS3208001,ERS3208002,ERS3208003,ERS3208004,ERS3208005,ERS3208006,ERS3208007,ERS3208008,ERS3208009,ERS3208010,ERS3208011,ERS3208012,ERS3208013,ERS3208014,ERS3208015,ERS3208016,ERS3208017,ERS3208018,ERS3208019,ERS3208020,ERS3208021,ERS3208022,ERS3208023,ERS3208024,ERS3208025,ERS3208026,ERS3208027,ERS3208028,ERS3208029,ERS3208030,ERS3208031,ERS3208032,ERS3208033,ERS3208034,ERS3208035,ERS3208036,ERS3208037,ERS3208038,ERS3208039,ERS3208040,ERS3208041,ERS3208042,ERS3208043,ERS3208044,ERS3208045,ERS3208046,ERS3208047,ERS3208048,ERS3208049,ERS3208050,ERS3208051,ERS3208052,ERS3208053,ERS3208054,ERS3208055,ERS3208056,ERS3208057,5712STDY7848558,5712STDY7848559,ERS3223089,ERS3223090,ERS3223091,ERS3223092,ERS3223093,ERS3223094,ERS3223095,ERS3223096,ERS3223097,ERS3223098,ERS3223099,ERS3223100,ERS3223101,ERS3223102,ERS3223103,ERS3223104,ERS3223105,ERS3223106,ERS3223107,ERS3223108,ERS3223109,ERS3223110,ERS3223111,ERS3223112,ERS3223113,ERS3223114,ERS3223115,ERS3223116,ERS3223117,ERS3223118,ERS3223119,ERS3223120,ERS3223121,ERS3223122,ERS3223123,ERS3223124,ERS3223125,ERS3223126,ERS3223127,ERS3223128,ERS3223129,ERS3223130,ERS3223131,ERS3223132,ERS3223133,ERS3223134,ERS3223135,ERS3223136,ERS3223137,ERS3223138,ERS3223139,ERS3223140,ERS3223141,ERS3223142,ERS3223143,ERS3223144,ERS3223145,ERS3223146,ERS3223147,ERS3223148,ERS3223149,ERS3223150,ERS3223151,ERS3223152,ERS3223153,ERS3223154,ERS3223155,ERS3223156,ERS3223157,ERS3223158,ERS3223159,ERS3223160,ERS3223161,ERS3223162,ERS3223163,ERS3223164,ERS3223165,ERS3223166,ERS3223167,ERS3223168,ERS3223169,ERS3223170,ERS3223171,ERS3223172,ERS3223173,ERS3223174,ERS3223175,ERS3223176,ERS3223177,ERS3223178,ERS3223179,ERS3223180,ERS3223181,ERS3223182,5023STDY7880474,5023STDY7880475,ERS3222995,ERS3222996,ERS3222997,ERS3222998,ERS3222999,ERS3223000,ERS3223001,ERS3223002,ERS3223003,ERS3223004,ERS3223005,ERS3223006,ERS3223007,ERS3223008,ERS3223009,ERS3223010,ERS3223011,ERS3223012,ERS3223013,ERS3223014,ERS3223015,ERS3223016,ERS3223017,ERS3223018,ERS3223019,ERS3223020,ERS3223021,ERS3223022,ERS3223023,ERS3223024,ERS3223025,ERS3223026,ERS3223027,ERS3223028,ERS3223029,ERS3223030,ERS3223031,ERS3223032,ERS3223033,ERS3223034,ERS3223035,ERS3223036,ERS3223037,ERS3223038,ERS3223039,ERS3223040,ERS3223041,ERS3223042,ERS3223043,ERS3223044,ERS3223045,ERS3223046,ERS3223047,ERS3223048,ERS3223049,ERS3223050,ERS3223051,ERS3223052,ERS3223053,ERS3223054,ERS3223055,ERS3223056,ERS3223057,ERS3223058,ERS3223059,ERS3223060,ERS3223061,ERS3223062,ERS3223063,ERS3223064,ERS3223065,ERS3223066,ERS3223067,ERS3223068,ERS3223082,ERS3223083,ERS3223084,ERS3223085,ERS3223086,ERS3223087,ERS3223088,ERS3223069,ERS3223070,ERS3223071,ERS3223072,ERS3223073,ERS3223074,ERS3223075,ERS3223076,ERS3223077,ERS3223078,ERS3223079,ERS3223080,ERS3223081,5023STDY7880378,5023STDY7880379,ERS3223183,ERS3223184,ERS3223185,ERS3223186,ERS3223187,ERS3223188,ERS3223189,ERS3223190,ERS3223191,ERS3223192,ERS3223193,ERS3223194,ERS3223195,ERS3223196,ERS3223197,ERS3223198,ERS3223199,ERS3223200,ERS3223201,ERS3223202,ERS3223203,ERS3223204,ERS3223205,ERS3223206,ERS3223207,ERS3223208,ERS3223209,ERS3223210,ERS3223211,ERS3223212,ERS3223213,ERS3223214,ERS3223215,ERS3223216,ERS3223217,ERS3223218,ERS3223219,ERS3223220,ERS3223221,ERS3223222,ERS3223223,ERS3223224,ERS3223225,ERS3223226,ERS3223227,ERS3223228,ERS3223229,ERS3223230,ERS3223231,ERS3223232,ERS3223233,ERS3223234,ERS3223235,ERS3223236,ERS3223237,ERS3223238,ERS3223239,ERS3223240,ERS3223241,ERS3223242,ERS3223243,ERS3223244,ERS3223245,ERS3223246,ERS3223247,ERS3223248,ERS3223249,ERS3223250,ERS3223251,ERS3223252,ERS3223253,ERS3223254,ERS3223255,ERS3223256,ERS3223257,ERS3223258,ERS3223259,ERS3223260,ERS3223261,ERS3223262,ERS3223263,ERS3223264,ERS3223265,ERS3223266,ERS3223267,ERS3223268,ERS3223269,ERS3223270,ERS3223271,ERS3223272,ERS3223273,ERS3223274,ERS3223275,ERS3223276,5023STDY7880570,5023STDY7880571,ERS3207987,ERS3207988,ERS3207989,ERS3207990,ERS3207991,ERS3207992,ERS3207993,ERS3207994,ERS3207995,ERS3207996,ERS3207997,ERS3207998,ERS3207999,ERS3208000,ERS3208001,ERS3208002,ERS3208003,ERS3208004,ERS3208005,ERS3208006,ERS3208007,ERS3208008,ERS3208009,ERS3208010,ERS3208011,ERS3208012,ERS3208013,ERS3208014,ERS3208015,ERS3208016,ERS3208017,ERS3208018,ERS3208019,ERS3208020,ERS3208021,ERS3208022,ERS3208023,ERS3208024,ERS3208025,ERS3208026,ERS3208027,ERS3208028,ERS3208029,ERS3208030,ERS3208031,ERS3208032,ERS3208033,ERS3208034,ERS3208035,ERS3208036,ERS3208037,ERS3208038,ERS3208039,ERS3208040,ERS3208041,ERS3208042,ERS3208043,ERS3208044,ERS3208045,ERS3208046,ERS3208047,ERS3208048,ERS3208049,ERS3208050,ERS3208051,ERS3208052,ERS3208053,ERS3208054,ERS3208055,ERS3208056,ERS3208057,5712STDY7848558,5712STDY7848559,ERS3223089,ERS3223090,ERS3223091,ERS3223092,ERS3223093,ERS3223094,ERS3223095,ERS3223096,ERS3223097,ERS3223098,ERS3223099,ERS3223100,ERS3223101,ERS3223102,ERS3223103,ERS3223104,ERS3223105,ERS3223106,ERS3223107,ERS3223108,ERS3223109,ERS3223110,ERS3223111,ERS3223112,ERS3223113,ERS3223114,ERS3223115,ERS3223116,ERS3223117,ERS3223118,ERS3223119,ERS3223120,ERS3223121,ERS3223122,ERS3223123,ERS3223124,ERS3223125,ERS3223126,ERS3223127,ERS3223128,ERS3223129,ERS3223130,ERS3223131,ERS3223132,ERS3223133,ERS3223134,ERS3223135,ERS3223136,ERS3223137,ERS3223138,ERS3223139,ERS3223140,ERS3223141,ERS3223142,ERS3223143,ERS3223144,ERS3223145,ERS3223146,ERS3223147,ERS3223148,ERS3223149,ERS3223150,ERS3223151,ERS3223152,ERS3223153,ERS3223154,ERS3223155,ERS3223156,ERS3223157,ERS3223158,ERS3223159,ERS3223160,ERS3223161,ERS3223162,ERS3223163,ERS3223164,ERS3223165,ERS3223166,ERS3223167,ERS3223168,ERS3223169,ERS3223170,ERS3223171,ERS3223172,ERS3223173,ERS3223174,ERS3223175,ERS3223176,ERS3223177,ERS3223178,ERS3223179,ERS3223180,ERS3223181,ERS3223182,5023STDY7880474,5023STDY7880475,ERS3222995,ERS3222996,ERS3222997,ERS3222998,ERS3222999,ERS3223000,ERS3223001,ERS3223002,ERS3223003,ERS3223004,ERS3223005,ERS3223006,ERS3223007,ERS3223008,ERS3223009,ERS3223010,ERS3223011,ERS3223012,ERS3223013,ERS3223014,ERS3223015,ERS3223016,ERS3223017,ERS3223018,ERS3223019,ERS3223020,ERS3223021,ERS3223022,ERS3223023,ERS3223024,ERS3223025,ERS3223026,ERS3223027,ERS3223028,ERS3223029,ERS3223030,ERS3223031,ERS3223032,ERS3223033,ERS3223034,ERS3223035,ERS3223036,ERS3223037,ERS3223038,ERS3223039,ERS3223040,ERS3223041,ERS3223042,ERS3223043,ERS3223044,ERS3223045,ERS3223046,ERS3223047,ERS3223048,ERS3223049,ERS3223050,ERS3223051,ERS3223052,ERS3223053,ERS3223054,ERS3223055,ERS3223056,ERS3223057,ERS3223058,ERS3223059,ERS3223060,ERS3223061,ERS3223062,ERS3223063,ERS3223064,ERS3223065,ERS3223066,ERS3223067,ERS3223068,ERS3223082,ERS3223083,ERS3223084,ERS3223085,ERS3223086,ERS3223087,ERS3223088,ERS3223069,ERS3223070,ERS3223071,ERS3223072,ERS3223073,ERS3223074,ERS3223075,ERS3223076,ERS3223077,ERS3223078,ERS3223079,ERS3223080,ERS3223081,5023STDY7880378,5023STDY7880379,ERS3223183,ERS3223184,ERS3223185,ERS3223186,ERS3223187,ERS3223188,ERS3223189,ERS3223190,ERS3223191,ERS3223192,ERS3223193,ERS3223194,ERS3223195,ERS3223196,ERS3223197,ERS3223198,ERS3223199,ERS3223200,ERS3223201,ERS3223202,ERS3223203,ERS3223204,ERS3223205,ERS3223206,ERS3223207,ERS3223208,ERS3223209,ERS3223210,ERS3223211,ERS3223212,ERS3223213,ERS3223214,ERS3223215,ERS3223216,ERS3223217,ERS3223218,ERS3223219,ERS3223220,ERS3223221,ERS3223222,ERS3223223,ERS3223224,ERS3223225,ERS3223226,ERS3223227,ERS3223228,ERS3223229,ERS3223230,ERS3223231,ERS3223232,ERS3223233,ERS3223234,ERS3223235,ERS3223236,ERS3223237,ERS3223238,ERS3223239,ERS3223240,ERS3223241,ERS3223242,ERS3223243,ERS3223244,ERS3223245,ERS3223246,ERS3223247,ERS3223248,ERS3223249,ERS3223250,ERS3223251,ERS3223252,ERS3223253,ERS3223254,ERS3223255,ERS3223256,ERS3223257,ERS3223258,ERS3223259,ERS3223260,ERS3223261,ERS3223262,ERS3223263,ERS3223264,ERS3223265,ERS3223266,ERS3223267,ERS3223268,ERS3223269,ERS3223270,ERS3223271,ERS3223272,ERS3223273,ERS3223274,ERS3223275,ERS3223276,5023STDY7880570,5023STDY7880571"
9	"--threads=8"
10	"--output-file=-"
11	"--compression-level=0"
------------------------------------------------------------------------
2 - bamindexdecoder

description	"assign RG values to readâ€¦sequence (BC tag value)"
comment	"now uses bambi decode (formerly java, illumina2bam BamIndexDecoder.jar"
use_STDOUT	true
use_STDIN	true
cmd	
0	"/software/sciops/pkg/bambi/0.11.1/bin/bambi"
1	"decode"
2	"--metrics-file"
3	
direction	"out"
port	"metrics_file"
4	"--barcode-file"
5	"/nfs/sf55/IL_seq_data/analysis/181009_MS3_27122_A_MS7201990-300V2/Data/Intensities/BAM_basecalls_20181010-125408/metadata_cache_27122/lane_1.taglist"
6	"--compression-level"
7	"0"
8	"-"
id	"bamindexdecoder"
type	"EXEC

0	"/software/sciops/pkg/bambi/0.11.2/bin/bambi"
1	"decode"
2	"--metrics-file"
3	
direction	"out"
port	"metrics_file"
4	"--barcode-file"
5	"/nfs/sf55/IL_seq_data/analysis/190327_MS7_28877_A_MS7940394-300V2/Data/Intensities/BAM_basecalls_20190328-133730/metadata_cache_28877/lane_1.taglist"
6	"--compression-level"
7	"0"
8	"-"

------------------------------------------------------------------------
3 - bamadapterfind

description	"Find and mark the adaptors used by Illumina"
use_STDOUT	true
use_STDIN	true
cmd	
0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bamadapterfind"
1	"level=0"
type	"EXEC"

0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bamadapterfind"
1	"level=0"

------------------------------------------------------------------------
4 - splitter

https://access.redhat.com/solutions/61334
Has to increase the ulimit -n (/etc/security/limits.conf -> *                soft    nofile          2048)

use_STDIN	true
description	"Split the BAM file into separate BAM files by Read Group"
use_STDOUT	false
id	"splitter"
type	"EXEC"
cmd	
0	"/software/sciops/pkg/samtools/1.8+59_g4da22a9/bin/samtools"
1	"split"
2	"--threads"
3	"4"
4	"-f"
5	"/nfs/sf55/IL_seq_data/analysis/181009_MS3_27122_A_MS7201990-300V2/Data/Intensities/BAM_basecalls_20181010-125408/no_cal/lane1/%!.bam"
6	"-"

Newer version
"/software/sciops/pkg/samtools/1.9+48_g2d4907c/bin/samtools"
1	"split"
2	"--threads"
3	"4"
4	"--output-fmt"
5	"cram,no_ref=1"
6	"-f"
7	"/nfs/sf55/IL_seq_data/analysis/190327_MS7_28877_A_MS7940394-300V2/Data/Intensities/BAM_basecalls_20190328-133730/no_cal/%!.cram"
8	"-"

-v

------------------------------------------------------------------------
************************************************************************

Step 2 - CRAM to per sample BAM

https://aspisstaticweb.cog.sanger.ac.uk/edit.html?cfg_name=step2

------------------------------------------------------------------------
1 - Done
aln_bam_collate2	@PG	ID:bamcollate2'	PN:bamcollate2	CL:/software/sciops/pkg/biobambam2/2.0.79/bin/bamcollate2 collate=1 level=0	PP:spf	VN:2.0.79

id	"aln_bamcollate2"
type	"EXEC"
cmd	
0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bamcollate2"
1	"collate=1"
2	"level=0"
comment	"ensure BAM records are gathered by template i.e. queryname"
use_STDIN	true
use_STDOUT	true

------------------------------------------------------------------------
2 - Done
aln_amp_bamreset	@PG	ID:bamreset	PN:bamreset	CL:/software/sciops/pkg/biobambam2/2.0.79/bin/bamreset resetaux=0 level=0 verbose=0	PP:bamcollate2'	VN:2.0.79

id	"aln_amp_bamreset_pre_auxmerge"
comment	"bam12auxmerge <= 0.0.142 requires SQ headers removed. Alignment removal also required for bamadapterclip (at least 0.0.142)"
use_STDOUT	true
use_STDIN	true
type	"EXEC"
cmd	
0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bamreset"
1	"resetaux=0"
2	"level=0"
3	"verbose=0"

------------------------------------------------------------------------
3 - Done
!aln_amp_bamadapterclip_pre_auxmerge	@PG	ID:bamadapterclip	PN:bamadapterclip	

CL:/software/sciops/pkg/biobambam2/2.0.79/bin/bamadapterclip verbose=0 level=0	PP:bamreset	VN:2.0.79

id	"aln_amp_bamadapterclip_pre_auxmerge"
cmd	
0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bamadapterclip"
1	"verbose=0"
2	"level=0"
type	"EXEC"
use_STDIN	true
use_STDOUT	true

------------------------------------------------------------------------
4 - Done
aln_alntgt_bamtofastq
id	"aln_alntgt_bamtofastq"
use_STDIN	true
use_STDOUT	true
type	"EXEC"
cmd	
0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bamtofastq"

------------------------------------------------------------------------
5 - Done
aln_alntgt_bwa_mem	@PG	ID:bwa'	PN:bwa	

CL:/software/sciops/pkg/bwa-aligner/0.7.17/bin/bwa
mem -tcat 4 24 -p -Y -K 100000000 
/lustre/scratch117/core/sciops_repository/gbs_plex/PFA_GRC2_v1.0/v6/all/bwa0_6/Pf_GRC2v1.0.fasta
/tmp/LRn3lXWTbo/aln_alntgt_bamtofastq_out

PP:bamadapterclip	VN:0.7.17-r1188

direction	"in"
port	"db_prefix_reference_genome"
9	
port	"fq"
direction	"in"
use_STDOUT	true
use_STDIN	false
comment	"presuming interleaved FR fastq records (-p flag), output all records (-T 0)"
id	"aln_alntgt_bwa_mem"

0	"/software/sciops/pkg/bwa-aligner/0.7.17/bin/bwa"
1	"mem"
2	"-t"
3	"24"
4	"-p"
5	"-Y"
6	"-K"
7	"100000000"
8	

Usage: bwa mem [options] <idxbase> <in1.fq> [in2.fq]

Algorithm options:

       -t INT        number of threads [1]
       -k INT        minimum seed length [19]
       -w INT        band width for banded alignment [100]
       -d INT        off-diagonal X-dropoff [100]
       -r FLOAT      look for internal seeds inside a seed longer than {-k} * FLOAT [1.5]
       -y INT        seed occurrence for the 3rd round seeding [20]
       -c INT        skip seeds with more than INT occurrences [500]
       -D FLOAT      drop chains shorter than FLOAT fraction of the longest overlapping chain [0.50]
       -W INT        discard a chain if seeded bases shorter than INT [0]
       -m INT        perform at most INT rounds of mate rescues for each read [50]
       -S            skip mate rescue
       -P            skip pairing; mate rescue performed unless -S also in use

Scoring options:

       -A INT        score for a sequence match, which scales options -TdBOELU unless overridden [1]
       -B INT        penalty for a mismatch [4]
       -O INT[,INT]  gap open penalties for deletions and insertions [6,6]
       -E INT[,INT]  gap extension penalty; a gap of size k cost '{-O} + {-E}*k' [1,1]
       -L INT[,INT]  penalty for 5'- and 3'-end clipping [5,5]
       -U INT        penalty for an unpaired read pair [17]

       -x STR        read type. Setting -x changes multiple parameters unless overridden [null]
                     pacbio: -k17 -W40 -r10 -A1 -B1 -O1 -E1 -L0  (PacBio reads to ref)
                     ont2d: -k14 -W20 -r10 -A1 -B1 -O1 -E1 -L0  (Oxford Nanopore 2D-reads to ref)
                     intractg: -B9 -O16 -L5  (intra-species contigs to ref)

Input/output options:

       -p            smart pairing (ignoring in2.fq)
       -R STR        read group header line such as '@RG\tID:foo\tSM:bar' [null]
       -H STR/FILE   insert STR to header if it starts with @; or insert lines in FILE [null]
       -o FILE       sam file to output results to [stdout]
       -j            treat ALT contigs as part of the primary assembly (i.e. ignore <idxbase>.alt file)
       -5            for split alignment, take the alignment with the smallest coordinate as primary
       -q            don't modify mapQ of supplementary alignments
       -K INT        process INT input bases in each batch regardless of nThreads (for reproducibility) []

       -v INT        verbosity level: 1=error, 2=warning, 3=message, 4+=debugging [3]
       -T INT        minimum score to output [30]
       -h INT[,INT]  if there are <INT hits with score >80% of the max score, output all in XA [5,200]
       -a            output all alignments for SE or unpaired PE
       -C            append FASTA/FASTQ comment to SAM output
       -V            output the reference FASTA header in the XR tag
       -Y            use soft clipping for supplementary alignments
       -M            mark shorter split hits as secondary

       -I FLOAT[,FLOAT[,INT[,INT]]]
                     specify the mean, standard deviation (10% of the mean if absent), max
                     (4 sigma from the mean if absent) and min of the insert size distribution.
                     FR orientation only. [inferred]

Note: Please read the man page for detailed description of the command line and options.

------------------------------------------------------------------------
6 - Done
aln_alntgt_samtobam	@PG	ID:scramble'	

PN:scramble	CL:/software/sciops/pkg/staden_io_bin/1.14.9/bin/scramble -0 -I sam -O bam 	PP:bwa'	VN:1.14.9

id	"aln_alntgt_samtobam"
use_STDOUT	true
use_STDIN	true
cmd	
0	"/software/sciops/pkg/staden_io_bin/1.14.9/bin/scramble"
1	"-0"
2	"-I"
3	"sam"
4	"-O"
5	"bam"
type	"EXEC"

------------------------------------------------------------------------
7 - Done

The below merges the current header with the old one. Keeping @SQ.*\tSN:([^\t]+) matching lines from the new header.

Line aln_postaln_tee_headerSQfix
0 comment	"get deadlock when tee used here; specify parameter value teepot_tempdir_value to specify teepot tempdir"
	use_STDOUT	false
	use_STDIN	true
	type	"EXEC"
	cmd	
	0	"/software/sciops/pkg/teepot/1.2.0/bin/teepot"
	1	"-v"
	2	"-t"
	3	"."
	4	"-w"
	5	"300"
	6	"-m"
	7	"100M"
	8	
	port	"header_fix"
	direction	"out"
	9	
	direction	"out"
	port	"full_bam"
1 "aln_postaln_sam_headerSQfix"
	/software/sciops/pkg/samtools/1.8+59_g4da22a9/bin/samtools,view,-h,- < pipe I/O
2  aln_postaln_sam_headerSQfix
	/software/sciops/pkg/samtools/1.9+48_g2d4907c/bin/samtools"
	1	"view"
	2	"-h"
	3	"-"
3 aln_postaln_alterSQ_headerSQfix
	PERL PERL PERL
	
	where SN field in SQ header record matches one in the given dict file,
	replace that SQ record with that in the dict file, but propagate any 'AH' fields provided by the aligner"
	 
	cmd	
	0	"/software/solexa/pkg/perl/5.22.2/bin/perl"
	1	"-nle"
	2	"
	
https://samtools.github.io/hts-specs/SAMv1.pdf

-----------------------------------------
use strict;
use autodie;
our%sq;
our$re;
our$body;
BEGIN{
	$body=0; 
	$re=qr/^\\@SQ.*\\tSN:([^\\t]+)/;
	open(my$df,q(<),shift@ARGV);
	while(<$df>)
	{
		chomp; <- chop removes any trailing string that equals $/ (not sure what the default value is. might be \n)
		if(/$re/)
		{
			$sq{$1}=$_;
		}
	} 
	close $df;
	} 
	next if $body ;
	if(/$re/)
	{
		if(my$nsq=$sq{$1})
		{
			my@ah=grep{/^AH:/}split qq(\\t),$_;
			$_=join qq(\\t),$nsq,@ah;
		} 
	}
	elsif(/^[^@]/)
	{
		open STDOUT,q(>),q(/dev/null);
		$body=1; 
		next
	} 
	print <---- prints $_ ($_ = the default input and pattern-searcvhing space) equals the value of chomp (maybe)
-----------------------------------------
	
	3	
	port	"picard_dict"
	direction	"in"
	type	"EXEC"
	comment	"careful to not send SIGPIPE back to tee, yet ensure EOF to reheader as soon as header processed, separate arguments to avoid being wrapped by a shell (which might hang onto file handles breaking this intention)"



aln_postaln_reheader_headerSQfix	@PG	ID:samtools'	PN:samtools	

CL:/software/sciops/pkg/samtools/1.9+48_g2d4907c/bin/samtools reheader
/tmp/4wFchqQ3OX/aln_postaln_alterSQ_headerSQfix_out
/tmp/AO3KtcmoM4/aln_postaln_mbuffer_headerSQfix_out	

PP:scramble'	VN:1.9-48-g2d4907c

id	"aln_postaln_reheader_headerSQfix"
cmd	
0	"/software/sciops/pkg/samtools/1.9+48_g2d4907c/bin/samtools"
1	"reheader"
2	
direction	"in"
port	"samheader"
3	
port	"bam"
direction	"in"
type	"EXEC"
use_STDIN	false
use_STDOUT	true

**** we can give samtools reheader anything ****
samtools view -H mybamfile.bam | sed -e 's/LB:/LB:tumor_/' | samtools reheader - mybamfile.bam > mybamfile.reheadered.bam


------------------------------------------------------------------------
8 - DONE
aln_postaln_bam12split	@PG	ID:bam12split	PN:bam12split	

bam12split reads a BAM file from standard input, projects rank pairs produced
by bamcollate2 to single ranks per read and writes the resulting data as a
BAM file.


CL:/software/sciops/pkg/biobambam2/2.0.79/bin/bam12split verbose=0 level=0	PP:samtools'	VN:2.0.79

id	"/software/sciops/pkg/biobambam2/2.0.79/bin/bam12split"
1	"verbose=0"
2	"level=0"
type	"EXEC"

------------------------------------------------------------------------
9 - Done
Missed aln_bam12auxmerge!!!!!

id	"aln_bam12auxmerge"
type	"EXEC"
cmd	
0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bam12auxmerge"
1	"level=0"
2	"rankstrip=1"
3	"ranksplit=0"
4	"zztoname=0"
5	"clipreinsert=1"
6	
port	"no_aln_bam"
direction	"in"
use_STDOUT	true
use_STDIN	true

Takes two inputs, one from test2-3 and one from test2-9

https://github.com/gt1/biobambam2/blob/master/src/programs/bam12auxmerge.1

------------------------------------------------------------------------
10 - Done
alignment_filter	@PG	ID:bambi.2	PN:bambi	PP:bam12auxmerge'	VN:0.11.2	

CL:/software/sciops/pkg/bambi/0.11.2/bin/bambi select --compression-level 0 
--input /tmp/pXfWxEuMZ2/aln_tee3_tee3:to_phix_aln_out,  /tmp/_mifZfbXtZ/aln_bam12auxmerge_out
 --output /tmp/cBVVC_duuJ/alignment_filter:phix_bam_out_out, /tmp/8VgrnwzvSv/alignment_filter:target_bam_out_out
 -m 28877_1#1_bam_alignment_filter_metrics.json	
 
 DS:Split alignments into different files

direction	"out"
port	"af_metrics"
type	"EXEC"
use_STDOUT	true
use_STDIN	false
id	"alignment_filter"
0	"/software/sciops/pkg/bambi/0.11.2/bin/bambi"
1	"select"
2	"--compression-level"
3	"0"
4	"--input"
5	
packflag	
0	
port	"phix_bam_in"
direction	"in"
1	
0	","
1	
direction	"in"
port	"target_bam_in"
6	"--output"
7	
packflag	
0	
direction	"out"
port	"phix_bam_out"
1	
0	","
1	
direction	"out"
port	"target_bam_out"
8	"-m"
9	


------------------------------------------------------------------------
11 - Done
foptgt_bamsort_coord	@PG	ID:bamsort	PN:bamsort	

CL:/software/sciops/pkg/biobambam2/2.0.79/bin/bamsort
threads=24
SO=coordinate 
level=0 
verbose=0 
fixmate=1 
adddupmarksupport=1 

tmpfile=/nfs/sf55/IL_seq_data/analysis/190327_MS7_28877_A_MS7940394-300V2/Data/Intensities/BAM_basecalls_20190328-133730/no_cal/archive/lane1/plex1/bsfopt_28877_1#1.tmp

PP:bambi.2	VN:2.0.79

use_STDOUT	true
use_STDIN	true
id	"foptgt_bamsort_coord"
0	"/software/sciops/pkg/biobambam2/2.0.79/bin/bamsort"
1	"threads=24"
2	"SO=coordinate"
3	"level=0"
4	"verbose=0"
5	"fixmate=1"
6	"adddupmarksupport=1"
7	"tmpfile=/nfs/sf55/IL_seq_data/analysis/190327_MS7_28877_A_MS7940394-300V2/Data/Intensities/BAM_basecalls_20190328-133730/no_cal/archive/lane1/plex1/bsfopt_28877_1#1.tmp"


------------------------------------------------------------------------
12 - Done
foptgt_scramble @PG	ID:scramble.1	PN:scramble	PP:bamsort	VN:1.14.9	

CL:/software/sciops/pkg/staden_io_bin/1.14.9/bin/scramble -t 11 -7 -I bam -O cram 
-r /lustre/scratch117/core/sciops_repository/gbs_plex/PFA_GRC2_v1.0/v6/all/fasta/Pf_GRC2v1.0.fasta 
-e 

id	"foptgt_scramble"
0	"/software/sciops/pkg/staden_io_bin/1.14.9/bin/scramble"
1	"-t"
2	"11"
3	"-7"
4	"-I"
5	"bam"
6	"-O"
7	"cram"
8	"-r"
9	"/lustre/scratch117/core/sciops_repository/gbs_plex/PFA_GRC2_v1.0/v6/all/fasta/Pf_GRC2v1.0.fasta"
10	"-e"

------------------------------------------------------------------------
************************************************************************
Step 3 - BAM to VCF
Taken from the steps documented in the VCF header
------------------------------------------------------------------------
1 - Done

Look at VCF header, run per CRAM

##bcftoolsVersion=1.8+htslib-1.8
##bcftoolsCommand=
mpileup 
--min-BQ 20 
--annotate FORMAT/AD,FORMAT/DP 
--max-depth 50000 
--targets-file /lustre/scratch117/core/sciops_repository/gbs_plex/PFA_GRC1_v1.0/v3/all/bcftools/Pf_GRC1v1.0.annotation.vcf 
--fasta-ref /lustre/scratch117/core/sciops_repository/gbs_plex/PFA_GRC1_v1.0/v3/all/fasta/Pf_GRC1v1.0.fasta 
--output-type u 
/nfs/sf55/IL_seq_data/analysis/181009_MS3_27122_A_MS7201990-300V2/Data/Intensities/BAM_basecalls_20181010-125408/no_cal/archive/lane1/27122_1#4.bam

------------------------------------------------------------------------
2 - Done
##bcftools_callVersion=1.8+htslib-1.8
##bcftools_callCommand=
call 
--multiallelic-caller 
--keep-alts 
--skip-variants indels 
--ploidy-file /lustre/scratch117/core/sciops_repository/gbs_plex/PFA_GRC1_v1.0/v3/all/bcftools/Pf_GRC1v1.0.ploidy -
-output-type u

Date=Wed Oct 10 13:45:58 2018

------------------------------------------------------------------------
3 - Done

##bcftools_filterVersion=1.8+htslib-1.8
##bcftools_filterCommand=
filter 
--mode + 
--soft-filter LowDepth 
--exclude FORMAT/DP<8 
--output-type v

Date=Wed Oct 10 13:45:58 2018

------------------------------------------------------------------------
4 - Done

##bcftools_filterCommand=
filter --mode + 
--soft-filter LowQual 
--exclude '%QUAL<15 || MQ<20' 
--output-type v 

Date=Wed Oct 10 13:45:58 2018

------------------------------------------------------------------------
************************************************************************
other notes

------------------------------------------------------------------------
Mount 100gb sample volume

sudo mount /dev/disk/by-id/virtio-70de560e-64dc-4bed-9 /mnt/bcl

------------------------------------------------------------------------
Progress in accessing required LIMS data

SELECT sample.name,iseq_flowcell.primer_panel,sample.supplier_name
FROM iseq_product_metrics, iseq_flowcell, sample
WHERE iseq_product_metrics.id_run = 27122 AND
iseq_product_metrics.id_iseq_flowcell_tmp = iseq_flowcell.id_iseq_flowcell_tmp AND
iseq_flowcell.id_sample_tmp = sample.id_sample_tmp order by sample.id_lims


---------------

SELECT sample.name,iseq_flowcell.primer_panel,iseq_flowcell.tag_index,sample.supplier_name,iseq_product_metrics.id_run
FROM iseq_product_metrics, iseq_flowcell, sample
WHERE iseq_product_metrics.id_run = 27122 AND
iseq_product_metrics.id_iseq_flowcell_tmp = iseq_flowcell.id_iseq_flowcell_tmp
and iseq_flowcell.id_sample_tmp = sample.id_sample_tmp
order by sample.well

----------------


SELECT sample.name,sample.accession_number, iseq_flowcell.primer_panel,iseq_flowcell.tag_index,sample.supplier_name,iseq_product_metrics.id_run
FROM iseq_product_metrics, iseq_flowcell, sample
WHERE iseq_product_metrics.id_run = 27122 AND
iseq_product_metrics.id_iseq_flowcell_tmp = iseq_flowcell.id_iseq_flowcell_tmp
and iseq_flowcell.id_sample_tmp = sample.id_sample_tmp

------------------------------------------------------------------------
Samtools use header

samtools view -H 27122_1#1.cram

------------------------------------------------------------------------

Illumina Experiment Manager <- is used to create sample sheets
